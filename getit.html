<!DOCTYPE html><html lang="en">
<head><!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fixed Image Visualizer</title>
  <style>
    html, body { margin: 0; padding: 0; background: #000; color: #fff; font-family: sans-serif; overflow: hidden; }
    #panelToggle {
      position: absolute; top: 0; left: 0; background: #333; color: #fff;
      padding: 6px 10px; cursor: pointer; z-index: 1000;
    }
    #panel {
      position: absolute; top: 32px; left: 0; background: rgba(0,0,0,0.8);
      padding: 10px; z-index: 999; border-bottom-right-radius: 8px;
    }
    label, select, input[type=file] {
      display: block; margin-bottom: 8px; width: 200px;
    }
    canvas { position: absolute; top: 0; left: 0; }
  </style>
</head>
<body>
<div id="panelToggle">Toggle Panel</div>
<div id="panel">
  <label>Mode:
    <select id="mode">
      <option value="static">Static</option>
      <option value="wave">Wave</option>
      <option value="ripple">Ripple (Touch + Tilt)</option>
    </select>
  </label>
  <label>Upload Image:
    <input type="file" id="upload" accept="image/*">
  </label>
</div>
<canvas id="canvas"></canvas>
<script>
(() => {
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const panel = document.getElementById('panel');
  const toggle = document.getElementById('panelToggle');
  const modeSel = document.getElementById('mode');
  const uploadEl = document.getElementById('upload');let width = canvas.width = window.innerWidth; let height = canvas.height = window.innerHeight; window.addEventListener('resize', () => { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; });

toggle.onclick = () => { panel.style.display = panel.style.display === 'none' ? 'block' : 'none'; };

let currentImage = null, imageData = null; let wavePhase = 0; let rippleBuf1, rippleBuf2, rippleOutput; const tilt = { gamma: 0, beta: 0 };

function drawStatic() { ctx.setTransform(1,0,0,1,0,0); ctx.clearRect(0, 0, width, height); ctx.drawImage(currentImage, 0, 0, width, height); }

function drawWave() { wavePhase += 0.1; for (let y = 0; y < height; y++) { const offset = Math.sin((y / 40) + wavePhase) * 20; ctx.drawImage(currentImage, 0, y, width, 1, offset, y, width, 1); } }

function drawRipple() { const src = imageData.data; const out = rippleOutput.data; for (let y = 1; y < height - 1; y++) { for (let x = 1; x < width - 1; x++) { const i = y * width + x; const val = ( rippleBuf1[i - 1] + rippleBuf1[i + 1] + rippleBuf1[i - width] + rippleBuf1[i + width] ) / 2 - rippleBuf2[i]; rippleBuf2[i] = val * 0.99;

const dx = rippleBuf2[i] - rippleBuf2[i - 1];
    const dy = rippleBuf2[i] - rippleBuf2[i - width];
    const sx = Math.min(width - 1, Math.max(0, x + dx * 0.5));
    const sy = Math.min(height - 1, Math.max(0, y + dy * 0.5));
    const si = (Math.floor(sy) * width + Math.floor(sx)) * 4;
    const di = i * 4;
    out[di] = src[si];
    out[di+1] = src[si+1];
    out[di+2] = src[si+2];
    out[di+3] = 255;
  }
}
[rippleBuf1, rippleBuf2] = [rippleBuf2, rippleBuf1];
ctx.putImageData(rippleOutput, 0, 0);

if (tilt.gamma > 15) disturb(width - 10, height / 2);
if (tilt.gamma < -15) disturb(10, height / 2);
if (tilt.beta > 15) disturb(width / 2, height - 10);
if (tilt.beta < -15) disturb(width / 2, 10);

}

function disturb(x, y) { const i = (Math.floor(y) * width + Math.floor(x)); if (i >= 0 && i < rippleBuf1.length) rippleBuf1[i] = 255; }

canvas.addEventListener('pointerdown', e => disturb(e.offsetX, e.offsetY)); window.addEventListener('deviceorientation', e => { tilt.gamma = e.gamma; tilt.beta = e.beta; });

function tick() { if (!currentImage) return requestAnimationFrame(tick); const mode = modeSel.value; ctx.clearRect(0, 0, width, height); if (mode === 'static') drawStatic(); else if (mode === 'wave') drawWave(); else if (mode === 'ripple') drawRipple(); requestAnimationFrame(tick); }

uploadEl.onchange = e => { const file = e.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = () => loadImage(reader.result); reader.readAsDataURL(file); };

function loadImage(base64) { const img = new Image(); img.onload = () => { currentImage = img; ctx.drawImage(img, 0, 0, width, height); imageData = ctx.getImageData(0, 0, width, height); rippleBuf1 = new Float32Array(width * height); rippleBuf2 = new Float32Array(width * height); rippleOutput = ctx.createImageData(width, height); }; img.src = base64; }

requestAnimationFrame(tick); })(); </script>

</body>
</html>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fixed Image Visualizer</title>
  <style>
    html, body { margin: 0; padding: 0; background: #000; color: #fff; font-family: sans-serif; overflow: hidden; }
    #panelToggle {
      position: absolute; top: 0; left: 0; background: #333; color: #fff;
      padding: 6px 10px; cursor: pointer; z-index: 1000;
    }
    #panel {
      position: absolute; top: 32px; left: 0; background: rgba(0,0,0,0.8);
      padding: 10px; z-index: 999; border-bottom-right-radius: 8px;
    }
    label, select, input[type=file] {
      display: block; margin-bottom: 8px; width: 200px;
    }
    canvas { position: absolute; top: 0; left: 0; }
  </style>
</head>
<body>
<div id="panelToggle">Toggle Panel</div>
<div id="panel">
  <label>Mode:
    <select id="mode">
      <option value="static">Static</option>
      <option value="wave">Wave</option>
      <option value="ripple">Ripple (Touch + Tilt)</option>
    </select>
  </label>
  <label>Upload Image:
    <input type="file" id="upload" accept="image/*">
  </label>
</div>
<canvas id="canvas"></canvas>
<script>
(() => {
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const panel = document.getElementById('panel');
  const toggle = document.getElementById('panelToggle');
  const modeSel = document.getElementById('mode');
  const uploadEl = document.getElementById('upload');let width = canvas.width = window.innerWidth; let height = canvas.height = window.innerHeight; window.addEventListener('resize', () => { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; });

toggle.onclick = () => { panel.style.display = panel.style.display === 'none' ? 'block' : 'none'; };

let currentImage = null, imageData = null; let wavePhase = 0; let rippleBuf1, rippleBuf2, rippleOutput; const tilt = { gamma: 0, beta: 0 };

function drawStatic() { ctx.setTransform(1,0,0,1,0,0); ctx.clearRect(0, 0, width, height); ctx.drawImage(currentImage, 0, 0, width, height); }

function drawWave() { wavePhase += 0.1; for (let y = 0; y < height; y++) { const offset = Math.sin((y / 40) + wavePhase) * 20; ctx.drawImage(currentImage, 0, y, width, 1, offset, y, width, 1); } }

function drawRipple() { const src = imageData.data; const out = rippleOutput.data; for (let y = 1; y < height - 1; y++) { for (let x = 1; x < width - 1; x++) { const i = y * width + x; const val = ( rippleBuf1[i - 1] + rippleBuf1[i + 1] + rippleBuf1[i - width] + rippleBuf1[i + width] ) / 2 - rippleBuf2[i]; rippleBuf2[i] = val * 0.99;

const dx = rippleBuf2[i] - rippleBuf2[i - 1];
    const dy = rippleBuf2[i] - rippleBuf2[i - width];
    const sx = Math.min(width - 1, Math.max(0, x + dx * 0.5));
    const sy = Math.min(height - 1, Math.max(0, y + dy * 0.5));
    const si = (Math.floor(sy) * width + Math.floor(sx)) * 4;
    const di = i * 4;
    out[di] = src[si];
    out[di+1] = src[si+1];
    out[di+2] = src[si+2];
    out[di+3] = 255;
  }
}
[rippleBuf1, rippleBuf2] = [rippleBuf2, rippleBuf1];
ctx.putImageData(rippleOutput, 0, 0);

if (tilt.gamma > 15) disturb(width - 10, height / 2);
if (tilt.gamma < -15) disturb(10, height / 2);
if (tilt.beta > 15) disturb(width / 2, height - 10);
if (tilt.beta < -15) disturb(width / 2, 10);

}

function disturb(x, y) { const i = (Math.floor(y) * width + Math.floor(x)); if (i >= 0 && i < rippleBuf1.length) rippleBuf1[i] = 255; }

canvas.addEventListener('pointerdown', e => disturb(e.offsetX, e.offsetY)); window.addEventListener('deviceorientation', e => { tilt.gamma = e.gamma; tilt.beta = e.beta; });

function tick() { if (!currentImage) return requestAnimationFrame(tick); const mode = modeSel.value; ctx.clearRect(0, 0, width, height); if (mode === 'static') drawStatic(); else if (mode === 'wave') drawWave(); else if (mode === 'ripple') drawRipple(); requestAnimationFrame(tick); }

uploadEl.onchange = e => { const file = e.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = () => loadImage(reader.result); reader.readAsDataURL(file); };

function loadImage(base64) { const img = new Image(); img.onload = () => { currentImage = img; ctx.drawImage(img, 0, 0, width, height); imageData = ctx.getImageData(0, 0, width, height); rippleBuf1 = new Float32Array(width * height); rippleBuf2 = new Float32Array(width * height); rippleOutput = ctx.createImageData(width, height); }; img.src = base64; }

requestAnimationFrame(tick); })(); </script>

</body>
</html>
